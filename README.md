# yamdb_final

![yamdb_workflow](https://github.com/Seniacat/yamdb_final/actions/workflows/yamdb_workflow.yml/badge.svg)


# API_YaMDB

### Описание
Проект сервиса API для YaMDB - социальной сети, которая собирает отзывы (Review) и оценки пользователей
на произведения (Title) в разных категориях и жанрах, а так же комментарии к отзывам.
Произведения делятся на категории (Category) и жанры (Genres), список которых может быть расширен, но правами на добавление
новых жанров, категорий и произведений обладает только администратор. 

Благодарные или возмущённые читатели оставляют к произведениям текстовые отзывы и выставляют произведению оценку в диапазоне от 1 до 10. 
Из множества оценок автоматически высчитывается рейтинг произведения.

Для авторизации пользователей используется код подтверждения.
Для аутентификации пользователей используются JWT-токены. 

Полная документация к API находится в /redoc

### Используемые технологии:
- Python 3.7
- Django 2.2.19
- Django RESTFramework 3.12.4

### Запуск проекта в dev-режиме:
Клонируйте репозиторий и перейдите в него в командной строке.
Создайте и активируйте виртуальное окружение:

```
git clone https://github.com/Seniacat/api_yamdb.git

python3 -m venv env

source env/bin/activate
```
Установите зависимости из файла requirements.txt:
```
python3 -m pip install --upgrade pip

pip install -r requirements.txt
```

Выполните миграции:
```
python3 manage.py migrate
```
Создайте суперпользователя, измените в админ-панели роль на admin:
```
python3 manage.py createuser
```
Запустите проект:
```
python3 manage.py runserver
```
### Работа с API для всех пользователей
Подробная документация доступна по адресу /redoc/.
Для неавторизованных пользователей работа с API доступна только в режиме чтения

```
Права доступа: Доступно без токена.
GET /api/v1/categories/ - Получение списка всех категорий
GET /api/v1/genres/ - Получение списка всех жанров
GET /api/v1/titles/ - Получение списка всех произведений
GET /api/v1/titles/{title_id}/reviews/ - Получение списка всех отзывов
GET /api/v1/titles/{title_id}/reviews/{review_id}/comments/ - Получение списка всех комментариев к отзыву
```
### Пользовательские роли
- Anonymous — может просматривать описания произведений, читать отзывы и комментарии.
- Аутентифицированный пользователь (user) — может, как и Аноним, читать всё, дополнительно он может публиковать отзывы и ставить оценку произведениям (фильмам/книгам/песенкам), может комментировать чужие отзывы; может редактировать и удалять свои отзывы и комментарии. Роль присваивается по умолчанию каждому новому пользователю.
- Модератор (moderator) — облаадет правами аутентифицированного пользователя + право удалять любые отзывы и комментарии.
- Администратор (admin) — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры, а так же назначать роли пользователям.

### Регистрация нового пользователя:
Получение кода подтверждения на переданный email. Поля email и username должны быть уникальными.
```
POST /api/v1/auth/signup/

{
  "email": "string",
  "username": "string"
}
```
 Получение JWT-токена для аутентификации
```
POST /api/v1/auth/token/

{
  "username": "string",
  "confirmation_code": "string"
}
```
### Работа с API для авторизованных пользователей
 Получение данных своей учетной записи:
```
Права доступа: user
GET api/v1/users/me/
```
Добавление категорий:
```
Права доступа: admin
POST /api/v1/categories/

{
  "name": "string",
  "slug": "string"
}
```
Добавление жанров:
```
Права доступа: admin
POST /api/v1/genres/

{
  "name": "string",
  "slug": "string"
}
```
Добавление произведений и обновление информации о произведении:
```
Права доступа: admin
POST /api/v1/titles/
PATCH /api/v1/titles/{titles_id}/

{
  "name": "string",
  "year": 0,
  "description": "string",
  "genre": [
    "string"
  ],
  "category": "string"
}
```
Удаление произведений
```
DELETE /api/v1/titles/{titles_id}/
```
Полный список эндпойнтов, методы и параметры запросов описаны в докуметации:
```
api/v1/redoc/ 
```

